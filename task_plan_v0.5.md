# Community Manager Agent Spine â€” v0.5 å¤šè¯­è¨€å®¢è¯‰å·¡èˆª

> **ç‰ˆæœ¬**: v0.5.0  
> **ä»£å·**: Multilingual Cruise  
> **ç›®æ ‡**: å¤šè¯­è¨€å®¢è¯‰è‡ªåŠ¨åˆ†ç±» + ç»“æ„åŒ–å·¡èˆªæŠ¥å‘Š  
> **å¼€å‘æ¨¡å¼**: é»„é‡‘ä¸‰è§’ (planning-with-files + task-workflow + tdd-sdd)  
> **é¢„è®¡å·¥æœŸ**: 3-4 å¤©  

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

1. **å¤šè¯­è¨€åˆ†ç±»**: æ”¯æŒç®€ä¸­/ç¹ä¸­/è‹±æ–‡/æ—¥æ–‡å®¢è¯‰è‡ªåŠ¨åˆ†ç±»
2. **å·¡èˆªæŠ¥å‘Š**: å®šæ—¶ç”Ÿæˆ Markdown æ ¼å¼å¤šè¯­è¨€ç»Ÿè®¡æŠ¥å‘Š
3. **è¯­è¨€æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å®¢è¯‰å†…å®¹è¯­è¨€
4. **CLI å·¥å…·**: `--cruise-once` å•æ¬¡æ‰§è¡Œæ¨¡å¼

---

## ğŸŒ å¤šè¯­è¨€æ¶æ„

### è¯­è¨€ä¼˜å…ˆçº§çŸ©é˜µ

| ä¼˜å…ˆçº§ | è¯­è¨€ | ä»£ç  | å…³é”®è¯è¦†ç›– | æŠ¥å‘Šæ”¯æŒ |
|--------|------|------|-----------|---------|
| P0 | ç®€ä½“ä¸­æ–‡ | zh-CN | âœ… | âœ… |
| P0 | ç¹ä½“ä¸­æ–‡ | zh-TW | âœ… | âœ… |
| P0 | è‹±æ–‡ | en | âœ… | âœ… |
| P1 | æ—¥æ–‡ | ja | âœ… | âœ… |
| P2 | éŸ©æ–‡ | ko | â­• åŸºç¡€ | â­• |
| P2 | è¥¿ç­ç‰™æ–‡ | es | â­• åŸºç¡€ | â­• |

### åˆ†ç±»ä½“ç³» (6å¤§ç±»åˆ«)

```typescript
type Category = 
  | 'payment'      // å……å€¼/æ”¯ä»˜é—®é¢˜
  | 'refund'       // é€€æ¬¾è¯‰æ±‚
  | 'bug'          // æ¸¸æˆbug/æŠ€æœ¯é—®é¢˜
  | 'ban_appeal'   // å°å·/è§£å°ç”³è¯‰
  | 'abuse'        // ä¸¾æŠ¥/ä½œå¼Š
  | 'general';     // å…¶ä»–/é€šç”¨
```

### ä¸‰çº§é™çº§ç­–ç•¥

```
LLM åˆ†ç±» (v0.6) â†’ å¤šè¯­è¨€å…³é”®è¯ (v0.5) â†’ general å…œåº•
     â†“ ä¸å¯ç”¨              â†“ æ— åŒ¹é…
   è‡ªåŠ¨é™çº§             è‡ªåŠ¨é™çº§
```

---

## ğŸ“¦ æ¨¡å—è®¾è®¡

### æ–°å¢æ¨¡å—

```
src/
â”œâ”€â”€ i18n/                          # æ–°å¢: å¤šè¯­è¨€æ”¯æŒ
â”‚   â”œâ”€â”€ keywords.ts                # å¤šè¯­è¨€å…³é”®è¯æ˜ å°„
â”‚   â”œâ”€â”€ detect.ts                  # è¯­è¨€æ£€æµ‹æ¨¡å—
â”‚   â””â”€â”€ reports.ts                 # å¤šè¯­è¨€æŠ¥å‘Šæ¨¡æ¿
â”œâ”€â”€ reports/                       # æ–°å¢: å·¡èˆªæŠ¥å‘Š
â”‚   â”œâ”€â”€ cruise-report.ts           # æŠ¥å‘Šç”Ÿæˆå™¨æ ¸å¿ƒ
â”‚   â”œâ”€â”€ formatters.ts              # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ templates.ts               # Markdownæ¨¡æ¿
â”œâ”€â”€ agent.ts                       # ä¿®æ”¹: é›†æˆå¤šè¯­è¨€triage
â”œâ”€â”€ config.ts                      # ä¿®æ”¹: æ–°å¢å·¡èˆªé…ç½®
â””â”€â”€ runtime/
    â””â”€â”€ cruise-scheduler.ts        # æ–°å¢: å®šæ—¶å·¡èˆªè°ƒåº¦
```

### æ•°æ®åº“ Schema

```sql
-- cruise_logs è¡¨ (æ–°å¢)
CREATE TABLE cruise_logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  timestamp INTEGER NOT NULL,
  report_md TEXT NOT NULL,
  stats_json TEXT NOT NULL,  -- { total, categories: {}, languages: {} }
  duration_ms INTEGER
);

-- tickets è¡¨æ‰©å±•
ALTER TABLE tickets ADD COLUMN detected_language TEXT;
ALTER TABLE tickets ADD COLUMN category_confidence REAL;
```

---

## ğŸ”¤ å¤šè¯­è¨€å…³é”®è¯ä½“ç³»

### å®Œæ•´æ˜ å°„è¡¨ (ç¤ºä¾‹)

```typescript
// src/i18n/keywords.ts

export const categoryKeywords: Record<Category, Record<Language, string[]>> = {
  payment: {
    'zh-CN': ['å……å€¼', 'æ”¯ä»˜', 'ä»˜æ¬¾', 'æ‰£è´¹', 'åˆ°è´¦', 'å……å€¼å¤±è´¥', 'æ²¡åˆ°è´¦'],
    'zh-TW': ['å……å€¼', 'æ”¯ä»˜', 'ä»˜æ¬¾', 'æ‰£è²»', 'åˆ°å¸³', 'å„²å€¼', 'æ²’åˆ°å¸³'],
    'en': ['payment', 'pay', 'purchase', 'charged', 'billing', 'not received', 'failed'],
    'ja': ['èª²é‡‘', 'æ”¯æ‰•ã„', 'è³¼å…¥', 'è«‹æ±‚', 'ãƒãƒ£ãƒ¼ã‚¸', 'åæ˜ ã•ã‚Œãªã„'],
    'ko': ['ê²°ì œ', 'ì¶©ì „', 'êµ¬ë§¤', 'ì²­êµ¬'],
    'es': ['pago', 'compra', 'cobro', 'facturaciÃ³n']
  },
  
  refund: {
    'zh-CN': ['é€€æ¬¾', 'é€€é’±', 'è¿”è¿˜', 'é€€è¯¾é‡‘', 'èƒ½é€€å—'],
    'zh-TW': ['é€€æ¬¾', 'é€€éŒ¢', 'è¿”é‚„', 'é€€è²»'],
    'en': ['refund', 'money back', 'return', 'chargeback'],
    'ja': ['è¿”é‡‘', 'æ‰•ã„æˆ»ã—', 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', 'ãƒªã‚¿ãƒ¼ãƒ³'],
    'ko': ['í™˜ë¶ˆ', 'ë°˜í’ˆ', 'ì·¨ì†Œ'],
    'es': ['reembolso', 'devoluciÃ³n', 'cancelar']
  },
  
  bug: {
    'zh-CN': ['é—ªé€€', 'å¡é¡¿', 'å´©æºƒ', 'bug', 'æ‰“ä¸å¼€', 'é»‘å±', 'ç™½å±', 'æ‰å¸§'],
    'zh-TW': ['é–ƒé€€', 'å¡é “', 'å´©æ½°', 'æ‰“ä¸é–‹', 'é»‘ç•«é¢'],
    'en': ['crash', 'bug', 'freeze', 'lag', 'black screen', 'not loading'],
    'ja': ['ã‚¯ãƒ©ãƒƒã‚·ãƒ¥', 'ãƒã‚°', 'ãƒ•ãƒªãƒ¼ã‚º', 'é‡ã„', 'è½ã¡ã‚‹', 'é»’ç”»é¢'],
    'ko': ['ì¶©ëŒ', 'ë²„ê·¸', 'ë©ˆì¶¤', 'ë ‰', 'ê²€ì€ í™”ë©´'],
    'es': ['error', 'fallo', 'congelado', 'pantalla negra', 'no carga']
  },
  
  ban_appeal: {
    'zh-CN': ['å°å·', 'å°ç¦', 'è§£å°', 'ç”³è¯‰', 'è¯¯å°', 'è´¦å·è¢«å°'],
    'zh-TW': ['å°è™Ÿ', 'å°ç¦', 'è§£å°', 'ç”³è¨´', 'èª¤å°'],
    'en': ['banned', 'suspended', 'ban appeal', 'account blocked', 'unban'],
    'ja': ['BAN', 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢', 'ç•°è­°ç”³ã—ç«‹ã¦', 'è§£é™¤', 'èª¤BAN'],
    'ko': ['ë°´', 'ì •ì§€', 'í•´ì œ', 'ì´ì˜ì œê¸°', 'ì˜¤ë°´'],
    'es': ['prohibido', 'suspendido', 'apelaciÃ³n', 'bloqueado']
  },
  
  abuse: {
    'zh-CN': ['ä¸¾æŠ¥', 'è¾±éª‚', 'å¤–æŒ‚', 'ä½œå¼Š', 'å¼€æŒ‚', 'éª—å­'],
    'zh-TW': ['èˆ‰å ±', 'è¾±ç½µ', 'å¤–æ›', 'ä½œå¼Š', 'é–‹æ›'],
    'en': ['report', 'cheating', 'hack', 'abuse', 'toxic', 'scam'],
    'ja': ['é€šå ±', 'ãƒãƒ¼ãƒˆ', 'æš´è¨€', 'ãƒãƒƒã‚¯', 'è©æ¬º'],
    'ko': ['ì‹ ê³ ', 'ìš•ì„¤', 'í•µ', 'ì¹˜íŠ¸', 'ì‚¬ê¸°'],
    'es': ['reportar', 'trampa', 'hack', 'abuso', 'estafa']
  }
};
```

---

## ğŸ“Š å·¡èˆªæŠ¥å‘Šè§„æ ¼

### æŠ¥å‘Šç»“æ„

```markdown
# å®¢è¯‰å·¡èˆªæŠ¥å‘Š â€” 2026-02-20 14:30 CST

## æ‰§è¡Œæ‘˜è¦
- ç»Ÿè®¡æ—¶æ®µ: 2026-02-20 00:00 ~ 14:30
- æ–°å¢å®¢è¯‰: 47 æ¡
- å¤„ç†å®Œæˆ: 12 æ¡
- å¾…å¤„ç†é˜Ÿåˆ—: 35 æ¡

## è¯­è¨€åˆ†å¸ƒ
| è¯­è¨€ | æ•°é‡ | å æ¯” |
|------|------|------|
| ç®€ä½“ä¸­æ–‡ | 28 | 59.6% |
| ç¹ä½“ä¸­æ–‡ | 8 | 17.0% |
| English | 7 | 14.9% |
| æ—¥æœ¬èª | 4 | 8.5% |

## åˆ†ç±»ç»Ÿè®¡
| ç±»åˆ« | æ•°é‡ | å æ¯” | é«˜ä¼˜å…ˆçº§ |
|------|------|------|---------|
| ğŸ’° Payment | 18 | 38.3% | 5 |
| ğŸ› Bug | 12 | 25.5% | 3 |
| ğŸ”„ Refund | 8 | 17.0% | 2 |
| ğŸ”’ Ban Appeal | 5 | 10.6% | 1 |
| âš ï¸ Abuse | 2 | 4.3% | 0 |
| ğŸ“ General | 2 | 4.3% | 0 |

## é«˜ä¼˜å…ˆçº§é˜Ÿåˆ— (Top 5)
| ID | è¯­è¨€ | ç±»åˆ« | å†…å®¹æ‘˜è¦ | ç­‰å¾…æ—¶é—´ |
|----|------|------|---------|---------|
| T1234 | zh-CN | payment | å……å€¼$99æœªåˆ°è´¦ | 4h 32m |
| T1231 | en | refund | è¦æ±‚é€€æ¬¾è£…å¤‡è´­ä¹° | 3h 15m |
| ... | ... | ... | ... | ... |

## è¶‹åŠ¿åˆ†æ
- ä»Šæ—¥ Payment ç±»å®¢è¯‰è¾ƒæ˜¨æ—¥ +35% âš ï¸
- å»ºè®®å…³æ³¨: å……å€¼æœªåˆ°è´¦é—®é¢˜é›†ä¸­çˆ†å‘

---
Generated by Community Manager Agent Spine v0.5.0
```

---

## ğŸ—ï¸ é»„é‡‘ä¸‰è§’æ‰§è¡Œè®¡åˆ’

### Phase 1: Planning (planning-with-files)

**ç›®æ ‡**: è¾“å‡ºå®Œæ•´å¼€å‘è®¡åˆ’ + SPEC.yaml

| ä»»åŠ¡ | è¾“å‡º | è´Ÿè´£ |
|------|------|------|
| æ›´æ–° task_plan.md | v0.5 è¯¦ç»†è§„åˆ’ | Galatea |
| åˆ›å»º SPEC.v0.5.yaml | TDD-SDD åŒé‡‘å­—å¡”æµ‹è¯•è§„èŒƒ | Galatea |
| åˆå§‹åŒ– task-workflow | ä»»åŠ¡é¢æ¿ + å­ä»»åŠ¡æ‹†åˆ† | Galatea |

### Phase 2: TDD-SDD Development

**ç›®æ ‡**: æŒ‰ SPEC å®ç°æ‰€æœ‰æ¨¡å—

**å­ä»£ç†å¹¶è¡Œä»»åŠ¡**:

| å­ä»£ç† | ä»»åŠ¡ | æ¨¡å— | å¤æ‚åº¦ |
|--------|------|------|--------|
| v05-sub1-i18n | å¤šè¯­è¨€å…³é”®è¯ + è¯­è¨€æ£€æµ‹ | i18n/* | Medium |
| v05-sub2-classifier | å¤šè¯­è¨€åˆ†ç±»å™¨é‡æ„ | agent.ts | High |
| v05-sub3-reports | å·¡èˆªæŠ¥å‘Šç”Ÿæˆå™¨ | reports/* | Medium |
| v05-sub4-scheduler | å®šæ—¶å·¡èˆª + CLI | cruise-scheduler.ts, config.ts | Low |

### Phase 3: Integration & Test

| ä»»åŠ¡ | å†…å®¹ |
|------|------|
| é›†æˆæµ‹è¯• | ç«¯åˆ°ç«¯å·¡èˆªæµç¨‹ |
| å¤šè¯­è¨€éªŒè¯ | 6è¯­ç§ Ã— 6åˆ†ç±» = 36ç§æµ‹è¯•ç”¨ä¾‹ |
| éªŒæ”¶ | é€šè¿‡æ‰€æœ‰éªŒæ”¶æ ‡å‡† |

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] ç®€ä¸­/ç¹ä¸­/è‹±æ–‡å®¢è¯‰åˆ†ç±»å‡†ç¡®ç‡ > 85%
- [ ] æ—¥æ–‡å®¢è¯‰åˆ†ç±»å‡†ç¡®ç‡ > 75%
- [ ] è¯­è¨€æ£€æµ‹å‡†ç¡®ç‡ > 90%
- [ ] å®šæ—¶å·¡èˆªæ¯ N åˆ†é’Ÿè‡ªåŠ¨æ‰§è¡Œ
- [ ] `--cruise-once` è¾“å‡ºå®Œæ•´æŠ¥å‘Šåˆ° stdout
- [ ] æŠ¥å‘Šæ­£ç¡®æŒ‰è¯­è¨€åˆ†ç»„ç»Ÿè®¡

### æµ‹è¯•éªŒæ”¶

- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] å¤šè¯­è¨€æµ‹è¯•ç”¨ä¾‹ > 30 ä¸ª
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] Mock æ¨¡å¼ä¸‹å®Œæ•´æµç¨‹éªŒè¯

### æ€§èƒ½éªŒæ”¶

- [ ] å•æ¬¡å·¡èˆªå¤„ç† 100 æ¡å®¢è¯‰ < 5 ç§’
- [ ] è¯­è¨€æ£€æµ‹ < 10ms/æ¡
- [ ] åˆ†ç±»å¤„ç† < 5ms/æ¡

---

## ğŸ“ ç¯å¢ƒå˜é‡

```bash
# v0.5 æ–°å¢
CRUISE_INTERVAL_MS=300000        # å·¡èˆªé—´éš” (é»˜è®¤5åˆ†é’Ÿ)
CRUISE_REPORT_LANGUAGE=zh-CN     # æŠ¥å‘Šè¾“å‡ºè¯­è¨€
CRUISE_BATCH_SIZE=100            # å•æ¬¡å¤„ç†ä¸Šé™

# v0.4 ç»§æ‰¿
SDK_BACKEND_TOKEN=xxx
SDK_BACKEND_BASE_URL=https://xyhy-admin.xiaoyuehy.com
SDK_BACKEND_POLL_INTERVAL_MS=30000
```

---

## ğŸ”— ä¾èµ–å…³ç³»

```
v0.4 (SDK Backend Connector) âœ…
    â†“
v0.5 (Multilingual Cruise) ğŸ”„ å½“å‰å¼€å‘
    â†“
v0.6 (LLM Enhanced)
```

---

## ğŸ“ äº¤ä»˜ç‰©æ¸…å•

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| å¼€å‘è®¡åˆ’ | `task_plan_v0.5.md` | æœ¬æ–‡ä»¶ |
| æµ‹è¯•è§„èŒƒ | `SPEC.v0.5.yaml` | TDD-SDD è§„èŒƒ |
| å…³é”®è¯è¡¨ | `src/i18n/keywords.ts` | 6è¯­ç§å…³é”®è¯ |
| è¯­è¨€æ£€æµ‹ | `src/i18n/detect.ts` | æ£€æµ‹æ¨¡å— |
| åˆ†ç±»å™¨ | `src/agent.ts` (æ›´æ–°) | å¤šè¯­è¨€ triage |
| æŠ¥å‘Šç”Ÿæˆå™¨ | `src/reports/cruise-report.ts` | æ ¸å¿ƒæ¨¡å— |
| å·¡èˆªè°ƒåº¦ | `src/runtime/cruise-scheduler.ts` | å®šæ—¶ä»»åŠ¡ |
| æ•°æ®åº“è¿ç§» | `src/repo/migrations.sql` | cruise_logs è¡¨ |
| æµ‹è¯•å¥—ä»¶ | `tests/` | å•å…ƒ+é›†æˆæµ‹è¯• |

---

*Planning Date: 2026-02-16*  
*Golden Triangle: planning-with-files + task-workflow + tdd-sdd*
